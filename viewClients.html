<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>View Clients</title>
  <link rel="stylesheet" href="viewClient.css">
  <link rel="stylesheet" href="topBar.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <style>
    .table-container {
      overflow-x: auto;
    }
    table {
      min-width: 1400px; /* Ensure horizontal scroll on smaller screens */
    }
  </style>
</head>
<body>
  <div id="topBarContainer"></div>

  <h1>Client Session History</h1>

  <div class="filter-group">
    <label>Date From:
      <input type="date" id="filterDateFrom">
    </label>
    <label>Date To:
      <input type="date" id="filterDateTo">
    </label>
    <label>Groomer:
      <select id="filterGroomer">
        <option value="">All</option>
      </select>
    </label>
    <label>Analogy:
      <select id="filterAnalogy">
        <option value="">All</option>
        <option value="Canine">Canine</option>
        <option value="Feline">Feline</option>
      </select>
    </label>
    <label>Package:
      <select id="filterPackage">
        <option value="">All</option>
        <option>None</option>
        <option>Basic</option>
        <option>Deluxe</option>
        <option>Premium</option>
      </select>
    </label>
    <label>Size:
      <select id="filterSize">
        <option value="">All</option>
        <option>Small</option>
        <option>Medium</option>
        <option>Large</option>
        <option>XL</option>
        <option>XXL</option>
      </select>
    </label>
    <div style="align-self: flex-end;">
      <button id="applyFilter">Apply</button>
      <button id="resetFilter">Reset</button>
    </div>
  </div>

  <div id="clientSearchContainer" style="margin-top: 1rem; display: flex; justify-content: flex-start;">
  <input
    type="text"
    id="clientSearchInput"
    placeholder="ðŸ” Search by Owner, Pet, or Contact"
    style="padding: 6px 10px;  width: 230px; font-size: 0.9rem; border-radius: 0px; border: 1px solid #ccc; margin-left: 0;"
  >
</div>

  <div class="table-container">
    <table>
     <thead>
  <tr>
    <th>Date</th>
    <th>Time Created</th>
    <th>J.O.</th>
    <th>Owner</th>
    <th>Contact</th>
    <th>Pet</th>
    <th>Breed</th>
    <th>Analogy</th>
    <th>Gender</th>
    <th>Age</th>
    <th>Weight</th>
    <th>Barcode</th>
    <th>Size</th>
    <th>Package</th>
    <th>Express</th>
    <th>Matting</th>
    <th>Tangling</th>
    <th>Shedding</th>
    <th>Groomer</th>
    <th>Total</th>
    <th>Action</th>
  </tr>
</thead>

      <tbody id="sessionTableBody"></tbody>
      <tfoot>
        <tr>
          <td colspan="19" style="text-align: right;"><strong>Total Sessions:</strong></td>
          <td id="totalSessions">0</td>
        </tr>
        <tr>
          <td colspan="19" style="text-align: right;"><strong>Total Amount (â‚±):</strong></td>
          <td id="totalAmount">0</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <div class="modal" id="detailsModal">
    <div class="modal-content">
      <h2>Session Details:</h2>
      <div id="modalFields"></div>
      <div class="modal-actions">
        <button class="btn-edit" id="editBtn">Edit</button>
        <button class="btn-save" id="saveBtn" style="display: none;">Save</button>
        <button class="btn-delete" id="deleteBtn">Delete</button>
        <button class="btn-close" id="closeBtn">Close</button>
      </div>
    </div>
  </div>
<div style="text-align: left; margin-bottom: 10px;">
  <button id="exportBtn">Export</button>
</div>

  <script src="viewClient.js"></script>
  <script>
    const topBarHtml = fs.readFileSync(path.join(__dirname, 'topBar.html'), 'utf-8');
    document.getElementById('topBarContainer').innerHTML = topBarHtml;
  </script>
  <script>
    const { loadTopBar } = require('./topBar.js');
    window.addEventListener('DOMContentLoaded', () => {
      loadTopBar();
    });
  </script>
  

</body>
</html>
