<!DOCTYPE html>
<html>
<head>
  <title>Register Admin</title>
</head>
<body>
  <h2>Register Admin</h2>
  <form id="adminForm">
    <label>Username:</label><br />
    <input type="text" id="username" required /><br />
    <label>Password:</label><br />
    <input type="password" id="password" required /><br />
    <label>Confirm Password:</label><br />
    <input type="password" id="confirmPassword" required /><br /><br />
    <button type="submit">Create Admin</button>
  </form>

  <script>
    const fs = require('fs');
    const path = require('path');
    const form = document.getElementById('adminForm');
    const usersPath = path.join(__dirname, 'users.json');

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;

      if (password !== confirmPassword) {
        alert("Passwords do not match!");
        return;
      }

      const userData = [{ username, password, role: 'admin' }];
      fs.writeFileSync(usersPath, JSON.stringify(userData, null, 2));
      alert('Admin created! Redirecting to login...');
      window.location = 'login.html';
    });
  </script>
</body>
</html>